<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <script src="../download.js"></script>
  <title>FORK(2)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">FORK(2)</td>
    <td class="head-vol">System Calls Manual</td>
    <td class="head-rtitle">FORK(2)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">fork</code> &#x2014;
<div class="Nd">create a new process</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<code class="In">#include <a class="In">&lt;unistd.h&gt;</a></code>
<p class="Pp"><var class="Ft">pid_t</var>
  <br/>
  <code class="Fn">fork</code>(<var class="Fa">void</var>);</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<code class="Fn">fork</code>() causes creation of a new process. The new process
  (child process) is an exact copy of the calling process (parent process)
  except for the following:
<ul class="Bl-bullet Bd-indent">
  <li>The child process has a unique process ID.</li>
  <li>The child process has a different parent process ID (i.e., the process ID
      of the parent process).</li>
  <li>The child process has its own copy of the parent's descriptors. These
      descriptors reference the same underlying objects, so that, for instance,
      file pointers in file objects are shared between the child and the parent,
      so that an <a class="Xr">lseek(2)</a> on a descriptor in the child process
      can affect a subsequent <a class="Xr">read</a> or <a class="Xr">write</a>
      by the parent. This descriptor copying is also used by the shell to
      establish standard input and output for newly created processes as well as
      to set up pipes.</li>
  <li>The child processes resource utilizations are set to 0; see
      <a class="Xr">setrlimit(2)</a>.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUES"><a class="permalink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
Upon successful completion, <code class="Fn">fork</code>() returns a value of 0
  to the child process and returns the process ID of the child process to the
  parent process. Otherwise, a value of -1 is returned to the parent process, no
  child process is created, and the global variable <var class="Va">errno</var>
  is set to indicate the error.
</section>
<section class="Sh">
<h1 class="Sh" id="ERRORS"><a class="permalink" href="#ERRORS">ERRORS</a></h1>
<code class="Fn">fork</code>() will fail and no child process will be created
  if:
<dl class="Bl-tag">
  <dt>[<a class="permalink" href="#EAGAIN"><code class="Er" id="EAGAIN">EAGAIN</code></a>]</dt>
  <dd>The system-imposed limit on the total number of processes under execution
      would be exceeded. This limit is configuration-dependent.</dd>
  <dt>[<a class="permalink" href="#EAGAIN_2"><code class="Er" id="EAGAIN_2">EAGAIN</code></a>]</dt>
  <dd>The system-imposed limit <code class="Dv">MAXUPRC</code>
      (&#x27E8;<span class="Pa">sys/param.h</span>&#x27E9;) on the total number
      of processes under execution by a single user would be exceeded.</dd>
  <dt>[<a class="permalink" href="#ENOMEM"><code class="Er" id="ENOMEM">ENOMEM</code></a>]</dt>
  <dd>There is insufficient swap space for the new process.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="LEGACY_SYNOPSIS"><a class="permalink" href="#LEGACY_SYNOPSIS">LEGACY
  SYNOPSIS</a></h1>
<code class="In">#include <a class="In">&lt;sys/types.h&gt;</a></code>
  <code class="In">#include <a class="In">&lt;unistd.h&gt;</a></code>
<p class="Pp">The include file
    <code class="In">&lt;<a class="In">sys/types.h</a>&gt;</code> is
  necessary.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr">execve(2)</a>, <a class="Xr">sigaction(2)</a>,
  <a class="Xr">wait(2)</a>, <a class="Xr">compat(5)</a>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
A <code class="Fn">fork</code>() function call appeared in
  <span class="Ux">Version&#x00A0;6 AT&amp;T UNIX</span>.
</section>
<section class="Sh">
<h1 class="Sh" id="CAVEATS"><a class="permalink" href="#CAVEATS">CAVEATS</a></h1>
There are limits to what you can do in the child process. To be totally safe you
  should restrict yourself to only executing async-signal safe operations until
  such time as one of the exec functions is called. All APIs, including global
  data symbols, in any framework or library should be assumed to be unsafe after
  a <code class="Fn">fork</code>() unless explicitly documented to be safe or
  async-signal safe. If you need to use these frameworks in the child process,
  you must exec. In this situation it is reasonable to exec yourself.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 4, 1993</td>
    <td class="foot-os">BSD 4</td>
  </tr>
</table>
</body>
</html>
