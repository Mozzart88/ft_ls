<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>GETRLIMIT(2)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GETRLIMIT(2)</td>
    <td class="head-vol">System Calls Manual</td>
    <td class="head-rtitle">GETRLIMIT(2)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">getrlimit</code>, <code class="Nm">setrlimit</code> &#x2014;
<div class="Nd">control maximum system resource consumption</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<code class="In">#include <a class="In">&lt;sys/resource.h&gt;</a></code>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">getrlimit</code>(<var class="Fa">int resource</var>,
    <var class="Fa">struct rlimit *rlp</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">setrlimit</code>(<var class="Fa">int resource</var>,
    <var class="Fa">const struct rlimit *rlp</var>);</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Limits on the consumption of system resources by the current process and each
  process it creates may be obtained with the
  <code class="Fn">getrlimit</code>() call, and set with the
  <code class="Fn">setrlimit</code>() call.
<p class="Pp">The <var class="Fa">resource</var> parameter is one of the
    following:</p>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#RLIMIT_CORE"><code class="Li" id="RLIMIT_CORE">RLIMIT_CORE</code></a></dt>
  <dd>The largest size (in bytes) <a class="Xr">core</a> file that may be
      created.</dd>
  <dt><a class="permalink" href="#RLIMIT_CPU"><code class="Li" id="RLIMIT_CPU">RLIMIT_CPU</code></a></dt>
  <dd>The maximum amount of cpu time (in seconds) to be used by each
    process.</dd>
  <dt><a class="permalink" href="#RLIMIT_DATA"><code class="Li" id="RLIMIT_DATA">RLIMIT_DATA</code></a></dt>
  <dd>The maximum size (in bytes) of the data segment for a process; this
      defines how far a program may extend its break with the
      <a class="Xr">sbrk(2)</a> system call.</dd>
  <dt><a class="permalink" href="#RLIMIT_FSIZE"><code class="Li" id="RLIMIT_FSIZE">RLIMIT_FSIZE</code></a></dt>
  <dd>The largest size (in bytes) file that may be created.</dd>
  <dt><a class="permalink" href="#RLIMIT_MEMLOCK"><code class="Li" id="RLIMIT_MEMLOCK">RLIMIT_MEMLOCK</code></a></dt>
  <dd>The maximum size (in bytes) which a process may lock into memory using the
      <a class="Xr">mlock(2)</a> function.</dd>
  <dt><a class="permalink" href="#RLIMIT_NOFILE"><code class="Li" id="RLIMIT_NOFILE">RLIMIT_NOFILE</code></a></dt>
  <dd>The maximum number of open files for this process.</dd>
  <dt><a class="permalink" href="#RLIMIT_NPROC"><code class="Li" id="RLIMIT_NPROC">RLIMIT_NPROC</code></a></dt>
  <dd>The maximum number of simultaneous processes for this user id.</dd>
  <dt><a class="permalink" href="#RLIMIT_RSS"><code class="Li" id="RLIMIT_RSS">RLIMIT_RSS</code></a></dt>
  <dd>The maximum size (in bytes) to which a process's resident set size may
      grow. This imposes a limit on the amount of physical memory to be given to
      a process; if memory is tight, the system will prefer to take memory from
      processes that are exceeding their declared resident set size.</dd>
  <dt><a class="permalink" href="#RLIMIT_STACK"><code class="Li" id="RLIMIT_STACK">RLIMIT_STACK</code></a></dt>
  <dd>The maximum size (in bytes) of the stack segment for a process; this
      defines how far a program's stack segment may be extended. Stack extension
      is performed automatically by the system.</dd>
</dl>
<p class="Pp">A resource limit is specified as a soft limit and a hard limit.
    When a soft limit is exceeded a process may receive a signal (for example,
    if the cpu time or file size is exceeded), but it will be allowed to
    continue execution until it reaches the hard limit (or modifies its resource
    limit). The <i class="Em">rlimit</i> structure is used to specify the hard
    and soft limits on a resource,</p>
<div class="Bd Pp Bd-indent">
<pre>
struct rlimit {
	rlim_t	rlim_cur;	/* current (soft) limit */
	rlim_t	rlim_max;	/* hard limit */
};
</pre>
</div>
<p class="Pp">Only the super-user may raise the maximum limits. Other users may
    only alter <var class="Fa">rlim_cur</var> within the range from 0 to
    <var class="Fa">rlim_max</var> or (irreversibly) lower
    <var class="Fa">rlim_max</var>.</p>
<p class="Pp">Because this information is stored in the per-process information,
    this system call must be executed directly by the shell if it is to affect
    all future processes created by the shell; <code class="Ic">limit</code> is
    thus a built-in command to <a class="Xr">csh(1)</a> and
    <code class="Ic">ulimit</code> is the <a class="Xr">sh(1)</a>
  equivalent.</p>
<p class="Pp">The system refuses to extend the data or stack space when the
    limits would be exceeded in the normal way: a <a class="Xr">break</a> call
    fails if the data space limit is reached. When the stack limit is reached,
    the process receives a segmentation fault (<code class="Dv">SIGSEGV</code>);
    if this signal is not caught by a handler using the signal stack, this
    signal will kill the process.</p>
<p class="Pp">A file I/O operation that would create a file larger that the
    process' soft limit will cause the write to fail and a signal
    <code class="Dv">SIGXFSZ</code> to be generated; this normally terminates
    the process, but may be caught. When the soft cpu time limit is exceeded, a
    signal <code class="Dv">SIGXCPU</code> is sent to the offending process.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUES"><a class="permalink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
A 0 return value indicates that the call succeeded, changing or returning the
  resource limit. A return value of -1 indicates that an error occurred, and an
  error code is stored in the global location <var class="Va">errno</var>.
</section>
<section class="Sh">
<h1 class="Sh" id="ERRORS"><a class="permalink" href="#ERRORS">ERRORS</a></h1>
The <code class="Fn">getrlimit</code>() and <code class="Fn">setrlimit</code>()
  system calls will fail if:
<dl class="Bl-tag">
  <dt>[<a class="permalink" href="#EFAULT"><code class="Er" id="EFAULT">EFAULT</code></a>]</dt>
  <dd>The address specified for <var class="Fa">rlp</var> is invalid.</dd>
  <dt>[<a class="permalink" href="#EINVAL"><code class="Er" id="EINVAL">EINVAL</code></a>]</dt>
  <dd><var class="Fa">resource</var> is invalid.</dd>
</dl>
<p class="Pp">The <code class="Fn">setrlimit</code>() call will fail if:</p>
<dl class="Bl-tag">
  <dt>[<a class="permalink" href="#EINVAL_2"><code class="Er" id="EINVAL_2">EINVAL</code></a>]</dt>
  <dd>The specified limit is invalid (e.g., RLIM_INFINITY or lower than
      rlim_cur).</dd>
  <dt>[<a class="permalink" href="#EPERM"><code class="Er" id="EPERM">EPERM</code></a>]</dt>
  <dd>The limit specified would have raised the maximum limit value and the
      caller is not the super-user.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="LEGACY_SYNOPSIS"><a class="permalink" href="#LEGACY_SYNOPSIS">LEGACY
  SYNOPSIS</a></h1>
<code class="In">#include <a class="In">&lt;sys/types.h&gt;</a></code>
  <code class="In">#include <a class="In">&lt;sys/time.h&gt;</a></code>
  <code class="In">#include <a class="In">&lt;sys/resource.h&gt;</a></code>
<p class="Pp">The include files
    <code class="In">&lt;<a class="In">sys/types.h</a>&gt;</code> and
    <code class="In">&lt;<a class="In">sys/time.h</a>&gt;</code> are
  necessary.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COMPATIBILITY"><a class="permalink" href="#COMPATIBILITY">COMPATIBILITY</a></h1>
<code class="Fn">setrlimit</code>() now returns with <var class="Va">errno</var>
  set to EINVAL in places that historically succeeded. It no longer accepts
  &quot;rlim_cur = RLIM_INFINITY&quot; for RLIM_NOFILE. Use &quot;rlim_cur =
  min(OPEN_MAX, rlim_max)&quot;.
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr">csh(1)</a>, <a class="Xr">sh(1)</a>, <a class="Xr">quota(2)</a>,
  <a class="Xr">sigaction(2)</a>, <a class="Xr">sigaltstack(2)</a>,
  <a class="Xr">sysctl(3)</a>, <a class="Xr">compat(5)</a>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
The <code class="Fn">getrlimit</code>() function call appeared in
  <span class="Ux">4.2BSD</span>.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 4, 1993</td>
    <td class="foot-os">BSD 4</td>
  </tr>
</table>
</body>
</html>
